<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>four.gb</title>
<style>
body {margin:0;font-family:system-ui,sans-serif;display:flex;height:100vh;background:#0f0f0f;color:white;overflow:hidden;}
#sidebar {width:220px;background:#161616;padding:12px;display:flex;flex-direction:column;align-items:center;}
#sidebar h2 {margin:8px 0;}
#sidebar button {margin:4px 0;padding:10px;border:none;border-radius:8px;background:#2a2a2a;color:white;cursor:pointer;width:90%;}
#sidebar button.active {background:#2e6cff;}
#projects {width:100%;margin-top:10px;overflow-y:auto;max-height:300px;}
.project {padding:6px;border-radius:6px;background:#2a2a2a;margin:4px 0;cursor:pointer;}
.project.active {background:#2e6cff;}

#main {flex:1;display:flex;flex-direction:column;}
#topbar {height:48px;background:#121212;display:flex;justify-content:flex-end;gap:10px;padding:0 12px;align-items:center;}
#topbar button {background:#2a2a2a;border:none;border-radius:8px;color:white;padding:6px 10px;}
#messages {flex:1;padding:12px;overflow-y:auto;display:flex;flex-direction:column;gap:8px;}
.msg {max-width:80%;padding:10px 14px;border-radius:14px;}
.user {align-self:flex-end;background:#2e6cff;}
.ai {align-self:flex-start;background:#2a2a2a;}
#input-area {display:flex;gap:8px;padding:10px;background:#111;}
#input {flex:1;padding:10px;border-radius:10px;border:none;background:#222;color:white;}
#send {width:44px;height:44px;border-radius:50%;border:none;background:#2e6cff;color:white;font-size:18px;cursor:pointer;}
</style>
</head>

<body>

<div id="sidebar">
  <h2>four.gb</h2>
  <button onclick="newProject()">âž• Project</button>
  <div id="projects"></div>
</div>

<div id="main">
  <div id="topbar">
    <button>ðŸ”— Share</button>
    <button>ðŸ‘¥ Add</button>
    <button>ðŸŽ¤ Talk</button>
  </div>

  <div id="messages"></div>

  <div id="input-area">
    <input id="input" placeholder="Ask anythingâ€¦" />
    <button id="send" onclick="send()">âž¤</button>
  </div>
</div>

<script>
/* ================= PROJECT SYSTEM ================= */
let projects = {};
let currentProject = null;

const messages = document.getElementById("messages");
const input = document.getElementById("input");
const projectsDiv = document.getElementById("projects");

function newProject(){
  const name = prompt("Project name?");
  if(!name || projects[name]) return;
  projects[name] = [];
  openProject(name);
  renderProjects();
}

function renderProjects(){
  projectsDiv.innerHTML="";
  Object.keys(projects).forEach(name=>{
    const div=document.createElement("div");
    div.className="project"+(name===currentProject?" active":"");
    div.textContent=name;
    div.onclick=()=>openProject(name);
    projectsDiv.appendChild(div);
  });
}

function openProject(name){
  currentProject=name;
  messages.innerHTML="";
  projects[name].forEach(m=>{
    renderMessage(m.text,m.who);
  });
  renderProjects();
}

/* ================= CHAT ================= */
function renderMessage(text,who){
  const div=document.createElement("div");
  div.className="msg "+who;
  div.textContent=text;
  messages.appendChild(div);
  messages.scrollTop=messages.scrollHeight;
}

function addMessage(text,who){
  if(!projects[currentProject]) return;

  const last = projects[currentProject].at(-1);
  if(last && last.text===text && last.who===who) return;

  projects[currentProject].push({text,who});
  renderMessage(text,who);
}

/* ================= AI ================= */
function parseBigNumber(str){
  const map={
    thousand:1e3,million:1e6,billion:1e9,trillion:1e12,
    quadrillion:1e15,quintillion:1e18,sextillion:1e21
  };
  let s=str.toLowerCase().replace(/,/g,"");
  let m=s.match(/([\d.]+)\s*(thousand|million|billion|trillion|quadrillion|quintillion|sextillion)?/);
  if(!m) return NaN;
  let n=parseFloat(m[1]);
  if(m[2]) n*=map[m[2]];
  return n;
}

function aiReply(text){
  let t=text.toLowerCase().trim();

  if(t==="doodledog6767"){
    return "https://www.youtube.com/watch?v=dQw4w9WgXcQ";
  }

  // math (x multiply)
  let math=t.replace(/(\d)\s*x\s*(\d)/g,"$1*$2");
  if(/^[\d+\-*/().\s]+$/.test(math)){
    try{return String(Function("return "+math)());}catch{}
  }

  // comparisons
  if(t.includes("what is bigger")){
    let p=t.split("bigger than");
    if(p.length===2){
      let a=parseBigNumber(p[0]);
      let b=parseBigNumber(p[1]);
      if(!isNaN(a)&&!isNaN(b)){
        return a>b?"The first is bigger.":b>a?"The second is bigger.":"They are equal.";
      }
    }
  }

  if(t.includes("what is war")){
    return "War is an armed conflict between groups or countries involving violence and political goals.";
  }

  return "I understand. Ask me more.";
}

/* ================= SEND ================= */
function send(){
  if(!currentProject){
    alert("Create or select a project first.");
    return;
  }
  const text=input.value.trim();
  if(!text) return;
  input.value="";
  addMessage(text,"user");

  setTimeout(()=>{
    addMessage(aiReply(text),"ai");
  },3000);
}

/* ENTER KEY FIX */
input.addEventListener("keydown",e=>{
  if(e.key==="Enter"){
    e.preventDefault();
    send();
  }
});

/* INIT */
newProject();
</script>

</body>
</html>

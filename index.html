<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>four.gb</title>

<!-- Website icon -->
<link rel="icon" href="data:image/svg+xml,
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'>
<text y='.9em' font-size='90'>:></text>
</svg>">

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: system-ui, sans-serif;
  background: #0f0f0f;
  color: white;
  display: flex;
  height: 100vh;
}

#sidebar {
  width: 220px;
  background: #161616;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

#sidebar h2 {
  text-align: center;
  margin: 6px 0 10px;
}

#sidebar button {
  background: #2a2a2a;
  border: none;
  border-radius: 8px;
  padding: 10px;
  color: white;
  cursor: pointer;
  font-size: 14px;
  text-align: left;
}

#sidebar button:hover { background: #3a3a3a; }
#sidebar button.active { background: #2e6cff; }

#main {
  flex: 1;
  display: flex;
  flex-direction: column;
}

#topbar {
  height: 48px;
  background: #121212;
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  padding: 8px;
}

#topbar button {
  background: #2a2a2a;
  border: none;
  border-radius: 8px;
  color: white;
  padding: 6px 10px;
  cursor: pointer;
}

#messages {
  flex: 1;
  overflow-y: auto;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.msg {
  max-width: 80%;
  padding: 10px 14px;
  border-radius: 14px;
}

.user { align-self: flex-end; background: #2e6cff; }
.ai { align-self: flex-start; background: #2a2a2a; }

.typing {
  font-size: 24px;
  letter-spacing: 4px;
  animation: blink 1.4s infinite;
}

@keyframes blink {
  0% { opacity: .2; }
  20% { opacity: 1; }
  100% { opacity: .2; }
}

#input-area {
  display: flex;
  gap: 8px;
  padding: 10px;
  background: #111;
}

#input {
  flex: 1;
  padding: 10px;
  border-radius: 10px;
  border: none;
  background: #222;
  color: white;
  font-size: 16px;
}

#send {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  border: none;
  background: #2e6cff;
  color: white;
  font-size: 20px;
  cursor: pointer;
}
</style>
</head>

<body>

<div id="sidebar">
  <h2>four.gb</h2>
  <button class="active" onclick="showChat()">ğŸ’¬ Chat</button>
  <button onclick="showImages()">ğŸ–¼ï¸ Images</button>
  <button onclick="clearChat()">ğŸ§¹ Clear</button>
  <button onclick="toggleVoice()">ğŸ™ï¸ Voice</button>
  <button onclick="openProfile()">ğŸ‘¤ Profile</button>
</div>

<div id="main">
  <div id="topbar">
    <button onclick="share()">ğŸ”— Share</button>
    <button onclick="addUser()">â• Add</button>
  </div>

  <div id="messages"></div>

  <div id="input-area">
    <input id="input" placeholder="Ask anythingâ€¦" />
    <button id="send" onclick="send()">â¤</button>
  </div>
</div>

<script>
const messages = document.getElementById("messages");
const input = document.getElementById("input");

let voiceEnabled = false;
let imageHistory = JSON.parse(localStorage.getItem("images") || "[]");

// spelling fixer
const spellingMap = {
  waht:"what", biger:"bigger", bilion:"billion", milion:"million",
  percantage:"percentage", decimel:"decimal"
};

function normalize(text) {
  return text.split(" ").map(w => spellingMap[w.toLowerCase()] || w).join(" ");
}

function addMessage(text, who) {
  const div = document.createElement("div");
  div.className = "msg " + who;
  div.textContent = text;
  messages.appendChild(div);
  messages.scrollTop = messages.scrollHeight;
}

function typingDots() {
  const d = document.createElement("div");
  d.className = "msg ai typing";
  d.textContent = "...";
  messages.appendChild(d);
  messages.scrollTop = messages.scrollHeight;
  return d;
}

function clearChat() {
  messages.innerHTML = "";
  localStorage.removeItem("chat");
}

function showChat() {
  clearChat();
  addMessage("Chat ready.", "ai");
}

function showImages() {
  clearChat();
  if (!imageHistory.length) {
    addMessage("No images yet.", "ai");
  }
}

function toggleVoice() {
  voiceEnabled = !voiceEnabled;
  alert("Voice " + (voiceEnabled ? "ON" : "OFF"));
}

function openProfile() {
  alert("Profile saved locally on this device.");
}

function share() {
  navigator.clipboard.writeText(location.href);
  alert("Link copied!");
}

function addUser() {
  const u = prompt("Enter username to add:");
  if (u) alert("Added user: " + u);
}

function solveMath(text) {
  if (/billion|million/.test(text)) {
    const nums = text.match(/\d+/g).map(Number);
    if (nums.length >= 2) {
      return `${nums[0]} billion is bigger than ${nums[1]} million.`;
    }
  }

  if (/^[0-9+\-*/().\s]+$/.test(text)) {
    try { return eval(text).toString(); }
    catch {}
  }
  return null;
}

async function send() {
  let text = input.value.trim();
  if (!text) return;
  input.value = "";

  text = normalize(text);
  addMessage(text, "user");

  const t = typingDots();
  await new Promise(r => setTimeout(r, 3000));
  t.remove();

  let reply =
    solveMath(text) ||
    (text.toLowerCase().includes("what do you know about math")
      ? "I know arithmetic, algebra, geometry, word problems, and big numbers like billions."
      : "Got it.");

  addMessage(reply, "ai");

  if (voiceEnabled) {
    speechSynthesis.speak(new SpeechSynthesisUtterance(reply));
  }
}

input.addEventListener("keydown", e => {
  if (enter.key === "Enter") send();
});
</script>

</body>
</html>

async function send(){
  const text = input.value.trim();
  if(!text) return;
  input.value = "";
  addMessage(text, "user");
  const typing = showTyping();
  const reply = await aiResponse(text);
  typing.remove();
  if(reply && typeof reply === "object" && reply.type === "image"){
    addMessage(reply,"ai");
  } else {
    addMessage(reply,"ai");
    if(voiceEnabled && typeof reply==="string"){
      let u=new SpeechSynthesisUtterance(reply);
      speechSynthesis.speak(u);
    }
  }
}

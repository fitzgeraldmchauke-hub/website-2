<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>four.gb</title>
<style>
body {margin:0; font-family:system-ui,sans-serif; display:flex; height:100vh; background:#0f0f0f; color:white; overflow:hidden;}
#sidebar {width:220px; background:#161616; padding:12px; display:flex; flex-direction:column; align-items:center;}
#sidebar h2 {text-align:center;margin:8px 0;}
#sidebar button {display:flex; align-items:center; gap:8px; margin:4px 0; padding:10px; border:none; border-radius:8px; background:#2a2a2a; color:white; cursor:pointer; width:90%;}
#sidebar button.active {background:#2e6cff;}
#sidebar button:hover {background:#444;}
#main {flex:1; display:flex; flex-direction:column; position:relative;}
#topbar {height:48px; background:#121212; display:flex; align-items:center; justify-content:flex-end; gap:10px; padding:0 12px;}
#topbar button {background:#2a2a2a; border:none; border-radius:8px; color:white; padding:6px 10px; cursor:pointer;}
#messages {flex:1; padding:12px; overflow-y:auto; display:flex; flex-direction:column; gap:8px;}
.msg {max-width:80%; padding:10px 14px; border-radius:14px;}
.user {align-self:flex-end; background:#2e6cff;}
.ai {align-self:flex-start; background:#2a2a2a;}
.msg img {max-width:100%; border-radius:12px; margin-top:6px;}
.typing {font-size:28px; letter-spacing:6px; animation:blink 1.4s infinite;}
@keyframes blink {0% {opacity:.2;} 20% {opacity:1;} 100% {opacity:.2;}}
#input-area {display:flex; gap:8px; padding:10px; background:#111;}
#input {flex:1; padding:10px; border-radius:10px; border:none; background:#222; color:white;}
#send {width:44px; height:44px; border-radius:12px; border:none; background:#2e6cff; color:white; font-size:18px; font-weight:bold; box-shadow: 2px 2px 5px #000; cursor:pointer;}
.popup {position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:#1e1e1e; padding:16px; border-radius:12px; display:none; width:280px; z-index:100;}
.popup button {width:100%; margin-top:8px;}
#profilePic {width:70px; height:70px; border-radius:50%; background:#444; cursor:pointer; object-fit:cover; display:block; margin:8px auto;}
#motherBtn {position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); width:150px; height:150px; border-radius:50%; background:red; display:none; cursor:pointer; z-index:200;}
#profileRing {border:5px solid gold; border-radius:50%; display:none; width:80px; height:80px; position:absolute; top:8px; left:8px;}
/* Mobile adjustments */
.mobile #input-area {position:absolute; top:0; width:100%; padding:10px; z-index:10;}
.mobile #messages {padding-top:64px;}
/* Device modal */
#deviceModal {position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); display:flex; flex-direction:column; justify-content:center; align-items:center; color:white; z-index:999;}
#deviceModal button {margin:8px; padding:12px 24px; font-size:18px; border:none; border-radius:8px; cursor:pointer; background:#2e6cff; color:white;}
</style>
</head>
<body>

<div id="deviceModal">
  <h2>Select your device</h2>
  <div>
    <button id="pcBtn">üíª PC</button>
    <button id="mobileBtn">üì± Mobile</button>
  </div>
</div>

<div id="sidebar">
<h2>four.gb</h2>
<img id="profilePic" src="" title="Upload avatar" onclick="uploadAvatar()">
<div id="profileRing"></div>
<button id="chatBtn" class="active">üí¨ Chat</button>
<button id="imgBtn">üñºÔ∏è Images</button>
<button id="clearBtn">üßπ Clear</button>
<button id="voiceBtn">üéôÔ∏è Voice ON</button>
<button id="profileBtn">üë§ Profile</button>
<button id="projectsBtn">üìÅ Projects</button>
</div>

<div id="main">
<div id="topbar">
<button id="shareBtn">üîó Share</button>
<button id="addBtn">üë• Add</button>
<button id="talkBtn">üé§ Talk</button>
</div>

<div id="messages"></div>

<div id="input-area">
<input id="input" placeholder="Ask anything‚Ä¶" />
<button id="send">‚ñ∂</button>
</div>
</div>

<div id="sharePopup" class="popup">
<div>Link copied!</div>
<button onclick="closePopups()">OK</button>
</div>
<div id="peoplePopup" class="popup">
<div>Add people coming soon</div>
<button onclick="closePopups()">Close</button>
</div>
<div id="profilePopup" class="popup">
<div>Profile Info</div>
<input id="usernameInput" placeholder="Username" />
<input id="passwordInput" type="password" placeholder="Password" />
<input id="ageInput" type="number" placeholder="Age 10-100" />
<button id="loginBtn">Login / Set</button>
<button id="logoutBtn">Logout</button>
<button onclick="closePopups()">Close</button>
</div>

<div id="motherBtn" onclick="clickMother()">Mother</div>

<script>
document.addEventListener("DOMContentLoaded",()=>{

let messages = document.getElementById("messages");
let input = document.getElementById("input");
let profilePic = document.getElementById("profilePic");
let profileRing = document.getElementById("profileRing");

let voiceEnabled=true,clickCount=0,username=localStorage.getItem("username")||"",password=localStorage.getItem("password")||"",age=parseInt(localStorage.getItem("age"))||0;
let projects=JSON.parse(localStorage.getItem("projects")||"[]"),currentProject=null;

// Device modal
document.getElementById("pcBtn").onclick=()=>{document.getElementById("deviceModal").style.display="none";}
document.getElementById("mobileBtn").onclick=()=>{document.getElementById("deviceModal").style.display="none";document.body.classList.add("mobile");}

// Sidebar buttons
document.getElementById("chatBtn").onclick=()=>{showChat();}
document.getElementById("imgBtn").onclick=()=>{showImages();}
document.getElementById("clearBtn").onclick=()=>{clearChat();}
document.getElementById("voiceBtn").onclick=()=>{toggleVoice();}
document.getElementById("profileBtn").onclick=()=>{openProfile();}
document.getElementById("projectsBtn").onclick=()=>{addProject();renderProjects();}

// Topbar buttons
document.getElementById("shareBtn").onclick=()=>{openShare();}
document.getElementById("addBtn").onclick=()=>{openPeople();}
document.getElementById("talkBtn").onclick=()=>{startVoice();}

// Profile login/logout
document.getElementById("loginBtn").onclick=()=>{login();}
document.getElementById("logoutBtn").onclick=()=>{logout();}

// Send
document.getElementById("send").onclick=()=>{send();}
input.addEventListener("keydown",e=>{if(e.key==="Enter") send();});

// Functions (shortened for brevity: you can copy previous full implementations)
function addMessage(content,who){const d=document.createElement("div");d.className="msg "+who;if(typeof content==="object"&&content.type==="image"){const img=document.createElement("img");img.src=content.src;d.appendChild(img);} else d.textContent=content;messages.appendChild(d);messages.scrollTop=messages.scrollHeight;saveProjectMessage(content,who);}
function saveProjectMessage(content,who){if(currentProject!==null){projects[currentProject].messages.push({content,who});localStorage.setItem("projects",JSON.stringify(projects));}}
function showTyping(){const d=document.createElement("div");d.className="msg ai typing";d.textContent="...";messages.appendChild(d);return d;}
function clearChat(){messages.innerHTML="";}
function showChat(){document.getElementById("chatBtn").classList.add("active");document.getElementById("imgBtn").classList.remove("active");clearChat();}
function showImages(){document.getElementById("imgBtn").classList.add("active");document.getElementById("chatBtn").classList.remove("active");clearChat();}
function toggleVoice(){voiceEnabled=!voiceEnabled;document.getElementById("voiceBtn").textContent=`üéôÔ∏è Voice ${voiceEnabled?"ON":"OFF"`;}
function openShare(){navigator.clipboard.writeText(location.href);document.getElementById("sharePopup").style.display="block";}
function openPeople(){document.getElementById("peoplePopup").style.display="block";}
function openProfile(){document.getElementById("profilePopup").style.display="block";}
function closePopups(){document.querySelectorAll(".popup").forEach(p=>p.style.display="none");}
function uploadAvatar(){if(!username){alert("Login first!");profilePic.style.display="none";setTimeout(()=>{profilePic.style.display="block";},200);}else{const f=document.createElement("input");f.type="file";f.accept="image/*";f.onchange=e=>{profilePic.src=URL.createObjectURL(e.target.files[0]);};f.click();}}
function login(){let u=document.getElementById("usernameInput").value.trim();let p=document.getElementById("passwordInput").value.trim();let a=parseInt(document.getElementById("ageInput").value);if(a<10||a>100){alert("Age must be 10-100");return;}username=u;password=p;age=a;localStorage.setItem("username",u);localStorage.setItem("password",p);localStorage.setItem("age",a);closePopups();}
function logout(){username="";password="";age=0;localStorage.removeItem("username");localStorage.removeItem("password");localStorage.removeItem("age");}
function clickMother(){clickCount++;if(clickCount>=100){profileRing.style.display="block";alert("Decorative ring unlocked!");clickCount=0;}}
async function aiResponse(text){let t=text.toLowerCase();if(/^[0-9+\-*/().\sx√∑]+$/.test(text)){try{return String(Function("return "+text.replace(/x/g,"*").replace(/√∑/g,"/"))());}catch{}}if(t==="hi"||t==="hello")return"Hey";if(t==="doodledog6767")return"Secret link: https://www.youtube.com/watch?v=dQw4w9WgXcQ";return"Got it.";}
async function send(){const text=input.value.trim();if(!text)return;input.value="";addMessage(text,"user");const typing=showTyping();await new Promise(r=>setTimeout(r,3000));const reply=await aiResponse(text);typing.remove();addMessage(reply,"ai");if(voiceEnabled&&typeof reply==="string"){speechSynthesis.speak(new SpeechSynthesisUtterance(reply));}}
function startVoice(){const rec=new(window.SpeechRecognition||webkitSpeechRecognition)();rec.onresult=e=>{input.value=e.results[0][0].transcript;send();};rec.start();}

// Projects
function addProject(){const name=prompt("Project name:");if(!name)return;projects.push({name:name,messages:[]});localStorage.setItem("projects",JSON.stringify(projects));renderProjects();}
function renderProjects(){document.querySelectorAll(".project-btn").forEach(b=>b.remove());projects.forEach((p,i)=>{const btn=document.createElement("button");btn.className="project-btn";btn.textContent="üìÅ "+p.name;btn.onclick=()=>loadProject(i);document.getElementById("sidebar").appendChild(btn);});})
function loadProject(i){clearChat();projects[i].messages.forEach(m=>addMessage(m.content,m.who));currentProject=i;}
renderProjects();
});
</script>
</body>
</html>
